<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Buchfaltstudio</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="atmosphere"></div>
  <div class="page">
    <header class="hero">
      <div>
        <p class="eyebrow">Precision fold planning</p>
        <h1>Buchfaltstudio</h1>
        <p class="lede">Lade eine schwarz-weiße SVG hoch, wähle, wie viele Scheiben du möchtest, und erhalte sofort buchfaltende Koordinaten für jeden eingefärbten Streifen.</p>
      </div>
      <div class="hero-card">
        <p>Erstelle klare typografische Buchfalt-Stücke ohne Tabellenkalkulationen. Die App analysiert jede Spalte, findet die Bereiche und wandelt sie in millimetergenau perfekte Falzmarkierungen um.</p>
      </div>
    </header>

    <main class="workspace">
      <section class="panel controls">
        <h2>Artwork + Settings</h2>
        <form id="plannerForm">
          <div class="text-composer">
            <h3>Build from Text</h3>
            <div class="text-grid">
              <label>
                <span>Text to fold</span>
                <input id="textInput" type="text" maxlength="24" placeholder="Type a word or initials" />
              </label>
              <label>
                <span>Google font</span>
                <input
                  id="fontInput"
                  type="text"
                  value="Playfair Display"
                  list="fontSuggestions"
                  placeholder="z. B. Caveat Brush"
                  autocomplete="off"
                />
              </label>
              <datalist id="fontSuggestions">
                <option value="Playfair Display"></option>
                <option value="Montserrat"></option>
                <option value="Abril Fatface"></option>
                <option value="Raleway"></option>
                <option value="Space Grotesk"></option>
                <option value="Caveat Brush"></option>
                <option value="Caveat"></option>
              </datalist>
              <label>
                <span>Font size (px)</span>
                <input id="fontSizeInput" type="number" min="60" max="240" value="160" />
              </label>
              <label>
                <span>Padding (%)</span>
                <input id="paddingInput" type="number" min="5" max="40" value="18" />
              </label>
            </div>
            <div class="text-actions">
              <p class="micro-copy" id="textStatus">Tippe Text ein, um automatisch ein faltbares Wortzeichen zu erstellen.</p>
            </div>
          </div>
          <label class="file-drop" for="svgInput">
            <span class="hint">SVG ablegen oder zum Durchsuchen klicken</span>
            <input id="svgInput" type="file" accept="image/svg+xml" />
            <p id="fileName">Noch keine Datei ausgewählt</p>
          </label>

          <div class="field-grid">
            <label>
              <span>Anzahl der Seiten</span>
              <input id="columnInput" type="number" min="10" max="800" value="250" />
            </label>

            <label>
              <span>Buchhöhe (mm)</span>
              <input id="heightInput" type="number" min="100" max="400" value="210" />
            </label>

            <label>
              <span>Rauschschwelle</span>
              <input id="thresholdInput" type="number" min="0" max="255" value="235" />
            </label>

            <label>
              <span>Alpha-Schwelle</span>
              <input id="alphaInput" type="number" min="0" max="255" value="40" />
            </label>
          </div>

          <button type="submit" class="primary">Falten generieren</button>
          <p class="micro-copy">Tipp: Halte SVGs rein schwarz-weiß für die saubersten Falzbänder.</p>
        </form>

        <div class="preview">
          <p>Artwork Vorschau</p>
          <img id="artworkPreview" alt="SVG Vorschau" />
        </div>
      </section>

      <section class="panel results">
        <div class="results-header">
          <div>
            <h2>Faltanweisungen</h2>
            <p class="micro-copy" id="summaryLine">Warte auf eine SVG...</p>
          </div>
          <button id="downloadPdf" class="ghost" disabled>PDF-Anleitung erstellen</button>
        </div>
        <div id="foldList" class="fold-list"></div>
        <div class="book-preview">
          <header>
            <h3>Buchvorschau</h3>
            <p class="micro-copy" id="previewStatus">Warte auf Faltdaten...</p>
          </header>
          <canvas id="bookPreviewCanvas" width="600" height="380" aria-label="Buchfaltvorschau"></canvas>
        </div>

        <div class="pdf-preview" id="pdfPreview">
          <header>
            <h3>PDF-Anleitung</h3>
            <p class="micro-copy" id="pdfStatus">Generiere Falze, um den PDF-Download zu aktivieren.</p>
          </header>
          <div class="pdf-actions">
            <a id="pdfDownloadLink" class="ghost disabled-link" aria-disabled="true" href="#" tabindex="-1">PDF herunterladen</a>
          </div>
        </div>
      </section>
    </main>
  </div>

  <canvas id="analysisCanvas" class="hidden" aria-hidden="true"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" defer></script>
  <script src="main.js" defer></script>
</body>
</html>
